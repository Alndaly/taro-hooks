{"code":"import { isFunction, ensure, EMPTY_OBJ } from '@tarojs/shared';\r\nimport container from '../container';\r\nimport SERVICE_IDENTIFIER from '../constants/identifiers';\r\nimport { Current } from '../current';\r\nimport { document } from '../bom/document';\r\nimport { getPageInstance, injectPageInstance, safeExecute, addLeadingSlash } from './common';\r\nimport { isBrowser } from '../env';\r\nimport { incrementId } from '../utils';\r\nimport { HOOKS_APP_ID } from '../constants';\r\nimport { eventHandler } from '../dom/event';\r\nconst hooks = container.get(SERVICE_IDENTIFIER.Hooks);\r\nfunction isClassComponent(R, component) {\r\n    var _a;\r\n    return isFunction(component.render) ||\r\n        !!((_a = component.prototype) === null || _a === void 0 ? void 0 : _a.isReactComponent) ||\r\n        component.prototype instanceof R.Component; // compat for some others react-like library\r\n}\r\n// 初始值设置为 any 主要是为了过 TS 的校验\r\nexport let R = EMPTY_OBJ;\r\nexport let PageContext = EMPTY_OBJ;\r\nexport function connectReactPage(R, id) {\r\n    const h = R.createElement;\r\n    return (component) => {\r\n        // eslint-disable-next-line dot-notation\r\n        const isReactComponent = isClassComponent(R, component);\r\n        const inject = (node) => node && injectPageInstance(node, id);\r\n        const refs = isReactComponent ? { ref: inject } : {\r\n            forwardedRef: inject,\r\n            // 兼容 react-redux 7.20.1+\r\n            reactReduxForwardedRef: inject\r\n        };\r\n        if (PageContext === EMPTY_OBJ) {\r\n            PageContext = R.createContext('');\r\n        }\r\n        return class Page extends R.Component {\r\n            constructor() {\r\n                super(...arguments);\r\n                this.state = {\r\n                    hasError: false\r\n                };\r\n            }\r\n            static getDerivedStateFromError(error) {\r\n                process.env.NODE_ENV !== 'production' && console.warn(error);\r\n                return { hasError: true };\r\n            }\r\n            // React 16 uncaught error 会导致整个应用 crash，\r\n            // 目前把错误缩小到页面\r\n            componentDidCatch(error, info) {\r\n                process.env.NODE_ENV !== 'production' && console.warn(error);\r\n                process.env.NODE_ENV !== 'production' && console.error(info.componentStack);\r\n            }\r\n            render() {\r\n                const children = this.state.hasError\r\n                    ? []\r\n                    : h(PageContext.Provider, { value: id }, h(component, Object.assign(Object.assign({}, this.props), refs)));\r\n                if (isBrowser) {\r\n                    return h('div', { id, className: 'taro_page' }, children);\r\n                }\r\n                return h('root', { id }, children);\r\n            }\r\n        };\r\n    };\r\n}\r\nlet ReactDOM;\r\nfunction setReconciler() {\r\n    const getLifecycle = function (instance, lifecycle) {\r\n        lifecycle = lifecycle.replace(/^on(Show|Hide)$/, 'componentDid$1');\r\n        return instance[lifecycle];\r\n    };\r\n    const modifyMpEvent = function (event) {\r\n        event.type = event.type.replace(/-/g, '');\r\n    };\r\n    const batchedEventUpdates = function (cb) {\r\n        ReactDOM.unstable_batchedUpdates(cb);\r\n    };\r\n    const mergePageInstance = function (prev, next) {\r\n        if (!prev || !next)\r\n            return;\r\n        // 子组件使用 lifecycle hooks 注册了生命周期后，会存在 prev，里面是注册的生命周期回调。\r\n        // prev 使用 Object.create(null) 创建，H5 的 fast-refresh 可能也会导致存在 prev，要排除这些意外产生的 prev\r\n        if ('constructor' in prev)\r\n            return;\r\n        Object.keys(prev).forEach(item => {\r\n            if (isFunction(next[item])) {\r\n                next[item] = [next[item], ...prev[item]];\r\n            }\r\n            else {\r\n                next[item] = [...(next[item] || []), ...prev[item]];\r\n            }\r\n        });\r\n    };\r\n    hooks.getLifecycle = getLifecycle;\r\n    hooks.modifyMpEvent = modifyMpEvent;\r\n    hooks.batchedEventUpdates = batchedEventUpdates;\r\n    hooks.mergePageInstance = mergePageInstance;\r\n    if (process.env.TARO_ENV === 'h5') {\r\n        hooks.createPullDownComponent = (el, _, R, customWrapper) => {\r\n            const isReactComponent = isClassComponent(R, el);\r\n            return R.forwardRef((props, ref) => {\r\n                const newProps = Object.assign({}, props);\r\n                const refs = isReactComponent ? { ref: ref } : {\r\n                    forwardedRef: ref,\r\n                    // 兼容 react-redux 7.20.1+\r\n                    reactReduxForwardedRef: ref\r\n                };\r\n                return R.createElement(customWrapper || 'taro-pull-to-refresh', null, R.createElement(el, Object.assign(Object.assign({}, newProps), refs)));\r\n            });\r\n        };\r\n        hooks.getDOMNode = (inst) => {\r\n            return ReactDOM.findDOMNode(inst);\r\n        };\r\n    }\r\n}\r\nconst pageKeyId = incrementId();\r\nexport function createReactApp(App, react, reactdom, config) {\r\n    R = react;\r\n    ReactDOM = reactdom;\r\n    ensure(!!ReactDOM, '构建 React/Nerv 项目请把 process.env.FRAMEWORK 设置为 \\'react\\'/\\'nerv\\' ');\r\n    const ref = R.createRef();\r\n    const isReactComponent = isClassComponent(R, App);\r\n    setReconciler();\r\n    class AppWrapper extends R.Component {\r\n        constructor() {\r\n            super(...arguments);\r\n            // run createElement() inside the render function to make sure that owner is right\r\n            this.pages = [];\r\n            this.elements = [];\r\n        }\r\n        mount(component, id, cb) {\r\n            const key = id + pageKeyId();\r\n            const page = () => R.createElement(component, { key, tid: id });\r\n            this.pages.push(page);\r\n            this.forceUpdate(cb);\r\n        }\r\n        unmount(id, cb) {\r\n            for (let i = 0; i < this.elements.length; i++) {\r\n                const element = this.elements[i];\r\n                if (element.props.tid === id) {\r\n                    this.elements.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            this.forceUpdate(cb);\r\n        }\r\n        render() {\r\n            while (this.pages.length > 0) {\r\n                const page = this.pages.pop();\r\n                this.elements.push(page());\r\n            }\r\n            let props = null;\r\n            if (isReactComponent) {\r\n                props = { ref };\r\n            }\r\n            return R.createElement(App, props, isBrowser ? R.createElement('div', null, this.elements.slice()) : this.elements.slice());\r\n        }\r\n    }\r\n    let wrapper;\r\n    if (!isBrowser) {\r\n        // eslint-disable-next-line react/no-render-return-value\r\n        wrapper = ReactDOM.render(R.createElement(AppWrapper), document.getElementById('app'));\r\n    }\r\n    const app = Object.create({\r\n        render(cb) {\r\n            wrapper.forceUpdate(cb);\r\n        },\r\n        mount(component, id, cb) {\r\n            const page = connectReactPage(R, id)(component);\r\n            wrapper.mount(page, id, cb);\r\n        },\r\n        unmount(id, cb) {\r\n            wrapper.unmount(id, cb);\r\n        }\r\n    }, {\r\n        config: {\r\n            writable: true,\r\n            enumerable: true,\r\n            configurable: true,\r\n            value: config\r\n        },\r\n        onLaunch: {\r\n            enumerable: true,\r\n            writable: true,\r\n            value(options) {\r\n                Current.router = Object.assign({ params: options === null || options === void 0 ? void 0 : options.query }, options);\r\n                if (isBrowser) {\r\n                    // 由于 H5 路由初始化的时候会清除 app 下的 dom 元素，所以需要在路由初始化后执行 render\r\n                    // eslint-disable-next-line react/no-render-return-value\r\n                    wrapper = ReactDOM.render(R.createElement(AppWrapper), document.getElementById('app'));\r\n                }\r\n                const app = ref.current;\r\n                // For taroize\r\n                // 把 App Class 上挂载的额外属性同步到全局 app 对象中\r\n                if (app === null || app === void 0 ? void 0 : app.taroGlobalData) {\r\n                    const globalData = app.taroGlobalData;\r\n                    const keys = Object.keys(globalData);\r\n                    const descriptors = Object.getOwnPropertyDescriptors(globalData);\r\n                    keys.forEach(key => {\r\n                        Object.defineProperty(this, key, {\r\n                            configurable: true,\r\n                            enumerable: true,\r\n                            get() {\r\n                                return globalData[key];\r\n                            },\r\n                            set(value) {\r\n                                globalData[key] = value;\r\n                            }\r\n                        });\r\n                    });\r\n                    Object.defineProperties(this, descriptors);\r\n                }\r\n                this.$app = app;\r\n                if (app != null && isFunction(app.onLaunch)) {\r\n                    app.onLaunch(options);\r\n                }\r\n            }\r\n        },\r\n        onShow: {\r\n            enumerable: true,\r\n            writable: true,\r\n            value(options) {\r\n                const app = ref.current;\r\n                Current.router = Object.assign({ params: options === null || options === void 0 ? void 0 : options.query }, options);\r\n                if (app != null && isFunction(app.componentDidShow)) {\r\n                    app.componentDidShow(options);\r\n                }\r\n                // app useDidShow\r\n                triggerAppHook('onShow');\r\n            }\r\n        },\r\n        onHide: {\r\n            enumerable: true,\r\n            writable: true,\r\n            value(options) {\r\n                const app = ref.current;\r\n                if (app != null && isFunction(app.componentDidHide)) {\r\n                    app.componentDidHide(options);\r\n                }\r\n                // app useDidHide\r\n                triggerAppHook('onHide');\r\n            }\r\n        },\r\n        onPageNotFound: {\r\n            enumerable: true,\r\n            writable: true,\r\n            value(res) {\r\n                const app = ref.current;\r\n                if (app != null && isFunction(app.onPageNotFound)) {\r\n                    app.onPageNotFound(res);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    function triggerAppHook(lifecycle) {\r\n        const instance = getPageInstance(HOOKS_APP_ID);\r\n        if (instance) {\r\n            const app = ref.current;\r\n            const func = hooks.getLifecycle(instance, lifecycle);\r\n            if (Array.isArray(func)) {\r\n                func.forEach(cb => cb.apply(app));\r\n            }\r\n        }\r\n    }\r\n    Current.app = app;\r\n    return Current.app;\r\n}\r\nconst getNativeCompId = incrementId();\r\nfunction initNativeComponentEntry(R, ReactDOM) {\r\n    class NativeComponentWrapper extends R.Component {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.root = R.createRef();\r\n            this.ctx = this.props.getCtx();\r\n        }\r\n        componentDidMount() {\r\n            this.ctx.component = this;\r\n            const rootElement = this.root.current;\r\n            rootElement.ctx = this.ctx;\r\n            rootElement.performUpdate(true);\r\n        }\r\n        render() {\r\n            return (R.createElement('root', {\r\n                ref: this.root\r\n            }, this.props.renderComponent(this.ctx)));\r\n        }\r\n    }\r\n    class Entry extends R.Component {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.state = {\r\n                components: []\r\n            };\r\n        }\r\n        componentDidMount() {\r\n            Current.app = this;\r\n        }\r\n        mount(Component, compId, getCtx) {\r\n            const isReactComponent = isClassComponent(R, Component);\r\n            const inject = (node) => node && injectPageInstance(node, compId);\r\n            const refs = isReactComponent ? { ref: inject } : {\r\n                forwardedRef: inject,\r\n                reactReduxForwardedRef: inject\r\n            };\r\n            const item = {\r\n                compId,\r\n                element: R.createElement(NativeComponentWrapper, {\r\n                    key: compId,\r\n                    getCtx,\r\n                    renderComponent(ctx) {\r\n                        return R.createElement(Component, Object.assign(Object.assign({}, (ctx.data || (ctx.data = {})).props), refs));\r\n                    }\r\n                })\r\n            };\r\n            this.setState({\r\n                components: [...this.state.components, item]\r\n            });\r\n        }\r\n        unmount(compId) {\r\n            const components = this.state.components;\r\n            const index = components.findIndex(item => item.compId === compId);\r\n            const next = [...components.slice(0, index), ...components.slice(index + 1)];\r\n            this.setState({\r\n                components: next\r\n            });\r\n        }\r\n        render() {\r\n            const components = this.state.components;\r\n            return (components.map(({ element }) => element));\r\n        }\r\n    }\r\n    setReconciler();\r\n    const app = document.getElementById('app');\r\n    ReactDOM.render(R.createElement(Entry, {}), app);\r\n}\r\nexport function createNativeComponentConfig(Component, react, reactdom, componentConfig) {\r\n    R = react;\r\n    ReactDOM = reactdom;\r\n    const config = {\r\n        properties: {\r\n            props: {\r\n                type: null,\r\n                value: null,\r\n                observer(_newVal, oldVal) {\r\n                    oldVal && this.component.forceUpdate();\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            if (!Current.app) {\r\n                initNativeComponentEntry(R, ReactDOM);\r\n            }\r\n        },\r\n        attached() {\r\n            setCurrent();\r\n            this.compId = getNativeCompId();\r\n            this.config = componentConfig;\r\n            Current.app.mount(Component, this.compId, () => this);\r\n        },\r\n        ready() {\r\n            safeExecute(this.compId, 'onReady');\r\n        },\r\n        detached() {\r\n            Current.app.unmount(this.compId);\r\n        },\r\n        pageLifetimes: {\r\n            show() {\r\n                safeExecute(this.compId, 'onShow');\r\n            },\r\n            hide() {\r\n                safeExecute(this.compId, 'onHide');\r\n            }\r\n        },\r\n        methods: {\r\n            eh: eventHandler\r\n        }\r\n    };\r\n    function setCurrent() {\r\n        const pages = getCurrentPages();\r\n        const currentPage = pages[pages.length - 1];\r\n        if (Current.page === currentPage)\r\n            return;\r\n        Current.page = currentPage;\r\n        const route = currentPage.route || currentPage.__route__;\r\n        const router = {\r\n            params: currentPage.options || {},\r\n            path: addLeadingSlash(route),\r\n            onReady: '',\r\n            onHide: '',\r\n            onShow: ''\r\n        };\r\n        Current.router = router;\r\n        if (!currentPage.options) {\r\n            // 例如在微信小程序中，页面 options 的设置时机比组件 attached 慢\r\n            Object.defineProperty(currentPage, 'options', {\r\n                enumerable: true,\r\n                configurable: true,\r\n                get() {\r\n                    return this._optionsValue;\r\n                },\r\n                set(value) {\r\n                    router.params = value;\r\n                    this._optionsValue = value;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return config;\r\n}\r\n//# sourceMappingURL=react.js.map","references":["/Users/inoccent/github/taro-hooks/node_modules/@types/react/index.d.ts","/Users/inoccent/github/taro-hooks/node_modules/@tarojs/shared/dist/index.d.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/container/index.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/constants/identifiers.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/current.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/bom/document.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/dsl/common.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/env.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/utils/index.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/constants/index.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/dom/event.ts","/Users/inoccent/github/taro-hooks/node_modules/@tarojs/taro/types/index.d.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/dsl/instance.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/interface/index.ts","/Users/inoccent/github/taro-hooks/packages/taro-runtime/src/dom/root.ts"],"map":"{\"version\":3,\"file\":\"react.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/dsl/react.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/inoccent/github/taro-hooks/packages/taro-runtime/node_modules/.cache/rollup-plugin-typescript2/placeholder/dsl/react.d.ts","writeByteOrderMark":false,"text":"import type * as React from 'react';\r\nimport { eventHandler } from '../dom/event';\r\nimport type { AppConfig } from '@tarojs/taro';\r\nimport type { AppInstance, ReactPageComponent, PageProps } from './instance';\r\nexport declare let R: typeof React;\r\nexport declare let PageContext: React.Context<string>;\r\nexport declare function connectReactPage(R: typeof React, id: string): (component: ReactPageComponent) => React.ComponentClass<PageProps>;\r\nexport declare function createReactApp(App: React.ComponentClass, react: typeof React, reactdom: any, config: AppConfig): AppInstance;\r\nexport declare function createNativeComponentConfig(Component: any, react: typeof React, reactdom: any, componentConfig: any): {\r\n    properties: {\r\n        props: {\r\n            type: null;\r\n            value: null;\r\n            observer(_newVal: any, oldVal: any): void;\r\n        };\r\n    };\r\n    created(): void;\r\n    attached(): void;\r\n    ready(): void;\r\n    detached(): void;\r\n    pageLifetimes: {\r\n        show(): void;\r\n        hide(): void;\r\n    };\r\n    methods: {\r\n        eh: typeof eventHandler;\r\n    };\r\n};\r\n"}}
