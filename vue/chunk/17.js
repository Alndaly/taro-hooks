(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"187":function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return a})),r.d(t,"b",(function(){return generateGeneralFail})),r.d(t,"a",(function(){return combineOptions})),r.d(t,"d",(function(){return stringfiyUrl}));var n=r(19),o=r(189);var c=!0,a=function typeOf(e,t){return[t].flat().some((function(t){return Object.prototype.toString.call(e)==="[object "+t+"]"}))};function generateGeneralFail(e,t){var r="[API "+e+"] "+(t=t||"调用失败");return c||Object(n.m)(r),{"errMsg":r}}function combineOptions(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.assign({},e,t)}function stringfiyUrl(e,t){var r=e;if(t&&Object(n.n)(t,"Object")){var c=r.includes("?");r+=(c?"&":"?")+Object(o.stringify)(t)}return r}},"188":function(e,t,r){"use strict";var n=r(19),o=r(187);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.a=function usePromise(e){return function(t){var r;if(!e)return Promise.reject(Object(o.b)(e,"please input a valid method name"));var c=null!=(r=null==e?void 0:e.name)?r:"usePromise::implementMethod";return new Promise((function(r,a){try{if(!Object(n.g)(e))throw new TypeError("["+c+"] not vaild for Taro");var i;null==(i=e(_extends({},t||{},{"success":r,"fail":a})))||null==i.catch||i.catch(a)}catch(e){a(Object(o.b)(c,e.message))}}))}}},"189":function(e,t,r){"use strict";t.decode=t.parse=r(190),t.encode=t.stringify=r(191)},"190":function(e,t,r){"use strict";function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var c={};if("string"!=typeof e||0===e.length)return c;var a=/\+/g;e=e.split(t);var i=1e3;o&&"number"==typeof o.maxKeys&&(i=o.maxKeys);var u=e.length;i>0&&u>i&&(u=i);for(var s=0;s<u;++s){var f,l,g,b,v=e[s].replace(a,"%20"),m=v.indexOf(r);m>=0?(f=v.substr(0,m),l=v.substr(m+1)):(f=v,l=""),g=decodeURIComponent(f),b=decodeURIComponent(l),hasOwnProperty(c,g)?n(c[g])?c[g].push(b):c[g]=[c[g],b]:c[g]=b}return c};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},"191":function(e,t,r){"use strict";var n=r(22).default,o=function stringifyPrimitive(e){switch(n(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===n(e)?map(a(e),(function(n){var a=encodeURIComponent(o(n))+r;return c(e[n])?map(e[n],(function(e){return a+encodeURIComponent(o(e))})).join(t):a+encodeURIComponent(o(e[n]))})).join(t):i?encodeURIComponent(o(i))+r+encodeURIComponent(o(e)):""};var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function map(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},"197":function(e,t,r){"use strict";var n=r(8),o=r(333),c=r(188),a=r(187);t.a=function useToast(e){var t=n.a.useTaroRef(e);n.a.useTaroEffect((function(){t.current=e}),[e]);var r=Object(c.a)(o.h);return{"show":function show(e){if(!e&&!t.current)return Promise.reject(Object(a.b)("showToast","please provide a option"));var n=Object(a.a)(t.current,e);return r(n)},"hide":Object(c.a)(o.d)}}},"214":function(e,t,r){"use strict";r.d(t,"g",(function(){return a})),r.d(t,"f",(function(){return i})),r.d(t,"e",(function(){return u})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return v}));var n=r(6),o=r(11),c=r(16);function getItem(e){var t;try{t=JSON.parse(localStorage.getItem(e)||"")}catch(e){}return t&&"object"===Object(n.a)(t)&&t.hasOwnProperty("data")?{"result":!0,"data":t.data}:{"result":!1}}var a=function setStorageSync(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e){var r=Object(n.a)(t),c={};c="symbol"===r?{"data":""}:{"data":t},localStorage.setItem(e,JSON.stringify(c))}else console.error(Object(o.b)({"name":"setStorage","correct":"String","wrong":e}))},i=function setStorage(e){var t=Object(o.g)(e);if(!t.flag){var r={"errMsg":"setStorage:fail ".concat(t.msg)};return console.error(r.errMsg),Promise.reject(r)}var n=e.key,i=e.data,u=e.success,s=e.fail,f=e.complete,l=new c.b({"name":"setStorage","success":u,"fail":s,"complete":f});return"string"!=typeof n?l.fail({"errMsg":Object(o.b)({"para":"key","correct":"String","wrong":n})}):(a(n,i),l.success())},u=(Object(o.h)("revokeBufferURL"),function removeStorage(e){var t=Object(o.g)(e);if(!t.flag){var r={"errMsg":"removeStorage:fail ".concat(t.msg)};return console.error(r.errMsg),Promise.reject(r)}var n=e.key,a=e.success,i=e.fail,u=e.complete,s=new c.b({"name":"removeStorage","success":a,"fail":i,"complete":u});return"string"!=typeof n?s.fail({"errMsg":Object(o.b)({"para":"key","correct":"String","wrong":n})}):(function removeStorageSync(e){"string"==typeof e?localStorage.removeItem(e):console.error(Object(o.b)({"name":"removeStorage","correct":"String","wrong":e}))}(n),s.success())}),s=function getStorageSync(e){if("string"==typeof e){var t=getItem(e);return t.result?t.data:""}console.error(Object(o.b)({"name":"getStorageSync","correct":"String","wrong":e}))},f=function getStorageInfoSync(){return{"keys":Object.keys(localStorage),"limitSize":NaN,"currentSize":NaN}},l=function getStorageInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,r=e.fail,n=e.complete,o=new c.b({"name":"getStorageInfo","success":t,"fail":r,"complete":n});return o.success(f())},g=function getStorage(e){var t=Object(o.g)(e);if(!t.flag){var r={"errMsg":"getStorage:fail ".concat(t.msg)};return console.error(r.errMsg),Promise.reject(r)}var n=e.key,a=e.success,i=e.fail,u=e.complete,s=new c.b({"name":"getStorage","success":a,"fail":i,"complete":u});if("string"!=typeof n)return s.fail({"errMsg":Object(o.b)({"para":"key","correct":"String","wrong":n})});var f=getItem(n),l=f.result,g=f.data;return l?s.success({"data":g}):s.fail({"errMsg":"data not found"})},b=(Object(o.h)("createBufferURL"),function clearStorageSync(){localStorage.clear()}),v=function clearStorage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,r=e.fail,n=e.complete,o=new c.b({"name":"clearStorage","success":t,"fail":r,"complete":n});return b(),o.success()}},"269":function(e,t,r){"use strict";r.r(t);var n=r(197),o=r(214),c=r(8),a=r(19),i=r(188),u={"currentSize":0,"limitSize":0};function _await(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function _catch(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var s=function getStorageSpaceInfo(){var e=!1;return _await(_catch((function(){return function _invoke(e,t){var r=e();if(r&&r.then)return r.then(t);return t(r)}((function(){if(navigator&&"storage"in navigator&&"estimate"in navigator.storage)return _catch((function(){return _await(navigator.storage.estimate(),(function(t){var r=t.usage,n=void 0===r?0:r,o=t.quota;return e=!0,{"currentSize":n,"limitSize":void 0===o?0:o}}))}),(function(t){Object(a.m)("estimate failed",t);var r={"currentSize":Storage.length,"limitSize":0};return e=!0,r}))}),(function(t){return e?t:u}))}),(function(){return u})))},f=r(187);function _call(e,t,r){if(r)return t?t(e()):e();try{var n=Promise.resolve(e());return t?n.then(t):n}catch(e){return Promise.reject(e)}}function useStorage_catch(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function _empty(){}function _async(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l={"currentSize":0,"limitSize":0,"keys":[],"storage":{}};var g=function useStorage(){var e=_async((function(e){var t=!1;return useStorage_catch((function(){var r=[];return function useStorage_invoke(e,t){var r=e();return r&&r.then?r.then(t):t(r)}((function(){if(!e)return _call(o.c,(function(e){var n=e.keys;if(null==n||!n.length){return t=!0,{}}r=n}));r=[e].flat()}),(function(n){return t?n:function useStorage_await(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(Promise.all(r.map((function(e){return Object(o.b)({"key":e})}))),(function(t){var n=Object.fromEntries(t.map((function(e,t){var n=null==e?void 0:e.data;try{n=JSON.parse(n)}catch(e){Object(a.m)("parse storage data failed",e)}return[r[t],n]})));return Object(a.j)(e)?n[e]:n}))}))}),(function(e){return Object(f.b)("getStorage",e.errMsg||e.message)}))})),t=c.a.useTaroState(l),r=t[0],n=t[1],u=Object(i.a)(o.f),g=Object(i.a)(o.e),b=Object(i.a)(o.a),v=_async((function(){return function _continueIgnored(e){if(e&&e.then)return e.then(_empty)}(useStorage_catch((function(){return _call(o.c,(function(t){var r=t.keys;return _call(s,(function(t){return _call(e,(function(e){n(_extends({},t,{"keys":r,"storage":e}))}))}))}))}),(function(e){Object(a.m)("generateStorageInfo failed",e)})))}));return c.a.useTaroEffect((function(){v()}),[]),[r,{"set":function set(e,t){var r=t;try{r=JSON.stringify(t)}catch(e){Object(a.m)("can not convert json, use empty string instaned",e)}return u({"key":e,"data":r}).then((function(e){return v(),e}))},"get":e,"remove":function remove(e){return(e?g({"key":e}):b()).then((function(e){return n(_extends({},Object(a.e)(r),{"keys":[],"storage":{}})),e}))}}]},b=r(15),v=r(0),m=r(194),p=r.n(m),d=Object(v.createTextVNode)("随机设置缓存!"),j=Object(v.createTextVNode)("随机获取缓存!"),O=Object(v.createTextVNode)("随机移除缓存!");const y=Object(v.defineComponent)({"name":"index","setup":function setup(e){var t=g(),r=Object(b.a)(t,2),o=r[0],c=r[1],i=c.set,u=c.get,s=c.remove,f=Object(n.a)({"mask":!0,"title":"操作成功"}).show,l=function generateKey(){var e=Math.max(Math.ceil(Math.random()*Object(a.e)(o).keys.length),Object(a.e)(o).keys.length-1);return Object(a.e)(o).keys[e]};return function(e,t){var r=Object(v.resolveComponent)("nut-button"),n=Object(v.resolveComponent)("nut-cell"),c=Object(v.resolveComponent)("nut-cell-group"),a=Object(v.resolveComponent)("demo-content");return Object(v.openBlock)(),Object(v.createBlock)(a,null,{"default":Object(v.withCtx)((function(){return[Object(v.createVNode)(r,{"class":"gap","shape":"square","type":"primary","block":"","onClick":t[0]||(t[0]=function(e){return function handleAdd(){i(p.a.Random.word(),p.a.Random.name()).then((function(){f()}))}()})},{"default":Object(v.withCtx)((function(){return[d]})),"_":1}),Object(v.createVNode)(r,{"class":"gap","shape":"square","type":"primary","block":"","onClick":t[1]||(t[1]=function(e){return function handleGet(){u(l()).then((function(e){f({"title":null!=e?e:"获取失败"})}))}()})},{"default":Object(v.withCtx)((function(){return[j]})),"_":1}),Object(v.createVNode)(r,{"class":"gap","shape":"square","type":"danger","block":"","onClick":t[2]||(t[2]=function(e){return function handleRemove(){s(l()).then((function(){return f()}))}()})},{"default":Object(v.withCtx)((function(){return[O]})),"_":1}),Object(v.createVNode)(c,{"title":"当前缓存个数"},{"default":Object(v.withCtx)((function(){var t;return[Object(v.createVNode)(n,{"title":"缓存占用","sub-title":String(Object(v.unref)(o).currentSize)},null,8,["sub-title"]),Object(v.createVNode)(n,{"title":"缓存限制","sub-title":String(Object(v.unref)(o).limitSize)},null,8,["sub-title"]),Object(v.createVNode)(n,{"title":"当前缓存数量","sub-title":String(null===(t=Object(v.unref)(o).keys)||void 0===t?void 0:t.length)},null,8,["sub-title"]),Object(v.createVNode)(n,{"title":"分别为:"}),(Object(v.openBlock)(!0),Object(v.createElementBlock)(v.Fragment,null,Object(v.renderList)(Object(v.unref)(o).storage,(function(t,r){return Object(v.openBlock)(),Object(v.createBlock)(n,{"key":r,"title":r,"sub-title":e.$filters.stringify(t)},null,8,["title","sub-title"])})),128))]})),"_":1})]})),"_":1})}}});t.default=y}}]);