(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"187":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return generateGeneralFail})),n.d(t,"a",(function(){return combineOptions})),n.d(t,"d",(function(){return stringfiyUrl}));var r=n(19),o=n(189);var c=!0,i=function typeOf(e,t){return[t].flat().some((function(t){return Object.prototype.toString.call(e)==="[object "+t+"]"}))};function generateGeneralFail(e,t){var n="[API "+e+"] "+(t=t||"调用失败");return c||Object(r.m)(n),{"errMsg":n}}function combineOptions(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.assign({},e,t)}function stringfiyUrl(e,t){var n=e;if(t&&Object(r.n)(t,"Object")){var c=n.includes("?");n+=(c?"&":"?")+Object(o.stringify)(t)}return n}},"188":function(e,t,n){"use strict";var r=n(19),o=n(187);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function usePromise(e){return function(t){var n;if(!e)return Promise.reject(Object(o.b)(e,"please input a valid method name"));var c=null!=(n=null==e?void 0:e.name)?n:"usePromise::implementMethod";return new Promise((function(n,i){try{if(!Object(r.g)(e))throw new TypeError("["+c+"] not vaild for Taro");var u;null==(u=e(_extends({},t||{},{"success":n,"fail":i})))||null==u.catch||u.catch(i)}catch(e){i(Object(o.b)(c,e.message))}}))}}},"189":function(e,t,n){"use strict";t.decode=t.parse=n(190),t.encode=t.stringify=n(191)},"190":function(e,t,n){"use strict";function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var c={};if("string"!=typeof e||0===e.length)return c;var i=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=e.length;u>0&&a>u&&(a=u);for(var s=0;s<a;++s){var l,f,p,v,b=e[s].replace(i,"%20"),d=b.indexOf(n);d>=0?(l=b.substr(0,d),f=b.substr(d+1)):(l=b,f=""),p=decodeURIComponent(l),v=decodeURIComponent(f),hasOwnProperty(c,p)?r(c[p])?c[p].push(v):c[p]=[c[p],v]:c[p]=v}return c};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},"191":function(e,t,n){"use strict";var r=n(22).default,o=function stringifyPrimitive(e){switch(r(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,u){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===r(e)?map(i(e),(function(r){var i=encodeURIComponent(o(r))+n;return c(e[r])?map(e[r],(function(e){return i+encodeURIComponent(o(e))})).join(t):i+encodeURIComponent(o(e[r]))})).join(t):u?encodeURIComponent(o(u))+n+encodeURIComponent(o(e)):""};var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function map(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},"192":function(e,t,n){"use strict";var r=n(8),o=n(333),c=n(188),i=n(187);t.a=function useModal(e){var t=r.a.useTaroRef(e);r.a.useTaroEffect((function(){t.current=e}),[e]);var n=Object(c.a)(o.g);return function show(e){if(!e&&!t.current)return Promise.reject(Object(i.b)("showModal","please provide a option"));var r=Object(i.a)(t.current,e);return n(r)}}},"312":function(e,t,n){"use strict";n.r(t);var r,o=n(3),c=n(12),i=n(192),u=n(8),a=n(67),s=n(16),l=new s.a,f={"game":{"interval":20,"frequency":50},"ui":{"interval":60,"frequency":16.67},"normal":{"interval":200,"frequency":5}},p=function stopDeviceMotionListening(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,o=e.complete,c=new s.b({"name":"stopDeviceMotionListening","success":t,"fail":n,"complete":o});try{return window.removeEventListener("deviceorientation",r,!0),c.success()}catch(e){return c.fail({"errMsg":e.message})}},v=function startDeviceMotionListening(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.interval,n=void 0===t?"normal":t,o=e.success,c=e.fail,i=e.complete,u=new s.b({"name":"startDeviceMotionListening","success":o,"fail":c,"complete":i});try{var v=f[n];if(!window.DeviceOrientationEvent)throw new Error("deviceMotion is not supported");return r&&p(),r=Object(a.a)((function(e){l.trigger({"alpha":e.alpha,"beta":e.beta,"gamma":e.gamma})}),v.interval),window.addEventListener("deviceorientation",r,!0),u.success()}catch(e){return u.fail({"errMsg":e.message})}},b=n(188),d=n(187);var m=function useMotion(e,t){var n=u.a.useTaroState(),r=n[0],o=n[1],c=u.a.useTaroRef(!1),i=u.a.useTaroRef([]),a=function privateListener(e){o(e),i.current.forEach((function(t){return null==t?void 0:t(e)}))},s=function add(e){return c.current||(!function onDeviceMotionChange(e){l.add(e)}(a),c.current=!0),i.current=[].concat(i.current,[e]),Promise.resolve(Object(d.b)("add","success"))},f=function off(e){return 1===i.current.length&&(!function offDeviceMotionChange(e){l.remove(e)}(a),c.current=!1),i.current=i.current.filter((function(t){return t===e})),Promise.resolve(Object(d.b)("off","success"))},m=Object(b.a)(v),O=function start(e){var n,r={"interval":null!=(n=null!=e?e:t)?n:"normal"};return m(r).then((function(){return!0}),(function(){return!1}))},h=Object(b.a)(p),j=function stop(){return h().then((function(e){var t;return null==(t=i.current)||null==t.map||t.map((function(e){return f(e)})),e}))},g=function _async(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(){return function _catch(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return function _await(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}(O(t),(function(e){e&&!c.current&&s(a)}))}),(function(){return Object(d.b)("manualListenMotion")}))}));return u.a.useTaroEffect((function(){return e&&g(),function(){e&&j()}}),[e,t]),[r,{"start":O,"stop":j,"add":s,"off":f}]},O=n(15),h=n(0),j=Object(h.createTextVNode)("增加一次监听并取消"),g=Object(h.createTextVNode)("停止所有");const y=Object(h.defineComponent)({"name":"index","setup":function setup(e){var t=m(!0),n=Object(O.a)(t,2),r=n[0],u=n[1],a=(u.start,u.stop),s=u.add,l=u.off;console.log(r);var f=Object(i.a)({"title":"useMotion","showCancel":!1,"mask":!0}),p=function customListen(e){f({"content":JSON.stringify(e)}),l(customListen)},v=function(){var e=Object(c.a)(Object(o.a)().mark((function _callee(){return Object(o.a)().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(p);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),f({"content":"监听失败"});case 8:case"end":return e.stop()}}),_callee,null,[[0,5]])})));return function handleListen(){return e.apply(this,arguments)}}();return function(e,t){var n=Object(h.resolveComponent)("nut-button"),o=Object(h.resolveComponent)("nut-cell"),c=Object(h.resolveComponent)("nut-cell-group"),i=Object(h.resolveComponent)("demo-content");return Object(h.openBlock)(),Object(h.createBlock)(i,null,{"default":Object(h.withCtx)((function(){return[Object(h.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","onClick":t[0]||(t[0]=function(e){return v()})},{"default":Object(h.withCtx)((function(){return[j]})),"_":1}),Object(h.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","onClick":t[1]||(t[1]=function(e){return Object(h.unref)(a)()})},{"default":Object(h.withCtx)((function(){return[g]})),"_":1}),Object(h.createVNode)(c,{"title":"方向信息"},{"default":Object(h.withCtx)((function(){return[(Object(h.openBlock)(!0),Object(h.createElementBlock)(h.Fragment,null,Object(h.renderList)(Object(h.unref)(r),(function(t,n){return Object(h.openBlock)(),Object(h.createBlock)(o,{"key":n,"title":n,"sub-title":e.$filters.stringify(t)},null,8,["title","sub-title"])})),128))]})),"_":1})]})),"_":1})}}});t.default=y},"67":function(e,t,n){"use strict";function throttle(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2?arguments[2]:void 0,o=0;return function(){for(var c=arguments.length,i=new Array(c),u=0;u<c;u++)i[u]=arguments[u];var a=r||this,s=Date.now();s-o>n?(e.apply(this,i),o=s):(clearTimeout(t),t=setTimeout((function(){o=s,e.apply(a,i)}),n))}}n.d(t,"a",(function(){return throttle}))}}]);