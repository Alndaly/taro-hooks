(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"187":function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return generateGeneralFail})),n.d(e,"a",(function(){return combineOptions})),n.d(e,"d",(function(){return stringfiyUrl}));var r=n(19),o=n(189);var i=!0,c=function typeOf(t,e){return[e].flat().some((function(e){return Object.prototype.toString.call(t)==="[object "+e+"]"}))};function generateGeneralFail(t,e){var n="[API "+t+"] "+(e=e||"调用失败");return i||Object(r.m)(n),{"errMsg":n}}function combineOptions(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.assign({},t,e)}function stringfiyUrl(t,e){var n=t;if(e&&Object(r.n)(e,"Object")){var i=n.includes("?");n+=(i?"&":"?")+Object(o.stringify)(e)}return n}},"188":function(t,e,n){"use strict";var r=n(19),o=n(187);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.a=function usePromise(t){return function(e){var n;if(!t)return Promise.reject(Object(o.b)(t,"please input a valid method name"));var i=null!=(n=null==t?void 0:t.name)?n:"usePromise::implementMethod";return new Promise((function(n,c){try{if(!Object(r.g)(t))throw new TypeError("["+i+"] not vaild for Taro");var u;null==(u=t(_extends({},e||{},{"success":n,"fail":c})))||null==u.catch||u.catch(c)}catch(t){c(Object(o.b)(i,t.message))}}))}}},"189":function(t,e,n){"use strict";e.decode=e.parse=n(190),e.encode=e.stringify=n(191)},"190":function(t,e,n){"use strict";function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var c=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=t.length;u>0&&a>u&&(a=u);for(var s=0;s<a;++s){var l,d,f,v,p=t[s].replace(c,"%20"),h=p.indexOf(n);h>=0?(l=p.substr(0,h),d=p.substr(h+1)):(l=p,d=""),f=decodeURIComponent(l),v=decodeURIComponent(d),hasOwnProperty(i,f)?r(i[f])?i[f].push(v):i[f]=[i[f],v]:i[f]=v}return i};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},"191":function(t,e,n){"use strict";var r=n(22).default,o=function stringifyPrimitive(t){switch(r(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===r(t)?map(c(t),(function(r){var c=encodeURIComponent(o(r))+n;return i(t[r])?map(t[r],(function(t){return c+encodeURIComponent(o(t))})).join(e):c+encodeURIComponent(o(t[r]))})).join(e):u?encodeURIComponent(o(u))+n+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function map(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var c=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},"197":function(t,e,n){"use strict";var r=n(8),o=n(333),i=n(188),c=n(187);e.a=function useToast(t){var e=r.a.useTaroRef(t);r.a.useTaroEffect((function(){e.current=t}),[t]);var n=Object(i.a)(o.h);return{"show":function show(t){if(!t&&!e.current)return Promise.reject(Object(c.b)("showToast","please provide a option"));var r=Object(c.a)(e.current,t);return n(r)},"hide":Object(i.a)(o.d)}}},"265":function(t,e,n){"use strict";n.r(e);var r=n(3),o=n(12),i=n(197),c=n(8),u=n(11),a=(Object(u.h)("stopRecord"),Object(u.h)("startRecord"),Object(u.h)("getRecorderManager")),s=n(188),l=n(187);var d=function useRecord(){var t=c.a.useTaroRef(a()),e=Object(s.a)(t.current.start);return[t.current,{"start":e,"stop":function stop(){return new Promise((function(e,n){try{t.current.onStop((function callback(t){e(t)})),t.current.stop()}catch(t){n(Object(l.b)("stopRecord",t.errMsg||t.message))}}))}}]},f=n(4),v=n(5),p=n(13),h=n(16),b=function(){function InnerAudioContext(){var t=this;Object(f.a)(this,InnerAudioContext),this.__startTime=0,this.play=function(){var e;return null===(e=t.Instance)||void 0===e?void 0:e.play()},this.pause=function(){var e;return null===(e=t.Instance)||void 0===e?void 0:e.pause()},this.stop=function(){t.pause(),t.seek(0),t.stopStack.trigger()},this.seek=function(e){t.Instance&&(t.Instance.currentTime=e)},this.destroy=function(){t.stop(),t.Instance&&(document.body.removeChild(t.Instance),t.Instance=void 0)},this.onCanplay=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("canplay",n)},this.onPlay=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("play",n)},this.onPause=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("pause",n)},this.onStop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return t.stopStack.add(e)},this.onEnded=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("ended",n)},this.onTimeUpdate=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("timeupdate",n)},this.onError=function(e){return t.errorStack.add(e)},this.onWaiting=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("waiting",n)},this.onSeeking=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("seeking",n)},this.onSeeked=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.addEventListener("seeked",n)},this.offCanplay=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("canplay",n)},this.offPlay=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("play",n)},this.offPause=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("pause",n)},this.offStop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return t.stopStack.remove(e)},this.offEnded=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("ended",n)},this.offTimeUpdate=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("timeupdate",n)},this.offError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return t.errorStack.remove(e)},this.offWaiting=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("waiting",n)},this.offSeeking=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("seeking",n)},this.offSeeked=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return null===(e=t.Instance)||void 0===e?void 0:e.removeEventListener("seeked",n)},this.Instance=new Audio,this.errorStack=new h.a,this.stopStack=new h.a,p.a.eventCenter.on("__taroRouterChange",(function(){t.stop()})),this.onPlay((function(){t.currentTime!==t.startTime&&t.seek(t.startTime)}))}return Object(v.a)(InnerAudioContext,[{"key":"autoplay","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.autoplay)||!1},"set":function set(t){this.setProperty("autoplay",t)}},{"key":"buffered","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.buffered.length)||0}},{"key":"currentTime","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.currentTime)||0}},{"key":"duration","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.duration)||0}},{"key":"loop","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.loop)||!1},"set":function set(t){this.setProperty("loop",t)}},{"key":"paused","get":function get(){var t,e;return null===(e=null===(t=this.Instance)||void 0===t?void 0:t.paused)||void 0===e||e}},{"key":"src","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.src)||""},"set":function set(t){this.setProperty("src",t)}},{"key":"volume","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.volume)||0},"set":function set(t){this.setProperty("volume",t)}},{"key":"playbackRate","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.playbackRate)||0},"set":function set(t){this.setProperty("playbackRate",t)}},{"key":"obeyMuteSwitch","get":function get(){return!0},"set":function set(t){Object(u.d)("InnerAudioContext.obeyMuteSwitch")()}},{"key":"startTime","get":function get(){return this.__startTime||0},"set":function set(t){this.__startTime=t}},{"key":"referrerPolicy","get":function get(){var t;return(null===(t=this.Instance)||void 0===t?void 0:t.getAttribute("referrerpolicy"))||"origin"},"set":function set(t){var e;null===(e=this.Instance)||void 0===e||e.setAttribute("referrerpolicy",t)}},{"key":"setProperty","value":function setProperty(t,e){this.Instance&&(this.Instance[t]=e)}}]),InnerAudioContext}(),y=(Object(u.h)("stopVoice"),Object(u.h)("setInnerAudioOption")),g=(Object(u.h)("playVoice"),Object(u.h)("pauseVoice"),Object(u.h)("getAvailableAudioSources")),O=(Object(u.h)("createWebAudioContext"),Object(u.h)("createMediaAudioPlayer"),Object(u.h)("createAudioContext"),["context","success","fail","complete","mixWithOther","obeyMuteSwitch"]);var m=function _async(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t){var e=t.context,n=t.success,r=t.fail,o=t.complete,i=t.mixWithOther,c=void 0===i||i,u=t.obeyMuteSwitch,a=void 0===u||u,s=function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,O);return function _catch(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}((function(){return function _await(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}(y({"mixWithOther":c,"obeyMuteSwitch":a}),(function(){if(e)for(var t in s)e[t]=s[t];var r={"errMsg":"setInnerAudioOption: success"};return null==n||n(r),null==o||o(r),r}))}),(function(t){var e=Object(l.b)("setInnerAudioOption",t.errMsg||t.message);throw null==r||r(e),null==o||o(e),new Error(e.errMsg)}))}));function _extends(){return(_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var j={"autoplay":!1,"loop":!1,"obeyMuteSwitch":!0,"playbackRate":1,"volume":1,"startTime":0};var I=function useAudio(t){void 0===t&&(t=j);var e=c.a.useTaroRef(function createInnerAudioContext(){return new b}()),n=c.a.useTaroRef(),r=Object(s.a)(m),o=Object(s.a)(g);return c.a.useTaroEffect((function(){r(_extends({},t,{"context":e.current})),function getSources(){o().then((function(t){return n.current=t.audioSources,t}))}()}),[t]),[e.current,{"sources":n.current,"setOption":r,"play":function play(t){e.current&&(t&&r({"src":t}),e.current.play())}}]},k=n(15),w=n(0),x=Object(w.createTextVNode)("开始录制"),P=Object(w.createTextVNode)("结束录制"),C=Object(w.createTextVNode)("播放音频"),S=Object(w.createTextVNode)("停止播放音频");const T=Object(w.defineComponent)({"name":"index","setup":function setup(t){var e=c.a.useTaroState(),n=Object(k.a)(e,2),u=n[0],a=n[1],s=I(),l=Object(k.a)(s,2),f=l[0],v=l[1].play,p=d(),h=Object(k.a)(p,2)[1],b=h.start,y=h.stop,g=Object(i.a)({"title":"useVoice","duration":500,"mask":!0}).show,O=function(){var t=Object(o.a)(Object(r.a)().mark((function _callee(){var t;return Object(r.a)().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g({"title":"正在停止","duration":2e7}),e.next=4,y();case 4:t=e.sent,a(t),g({"title":"停止录制成功"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),g({"title":"停止录制失败","icon":"error"});case 12:case"end":return e.stop()}}),_callee,null,[[0,9]])})));return function handleStop(){return t.apply(this,arguments)}}();return function(t,e){var n=Object(w.resolveComponent)("nut-button"),r=Object(w.resolveComponent)("demo-content");return Object(w.openBlock)(),Object(w.createBlock)(r,null,{"default":Object(w.withCtx)((function(){var t,r;return[Object(w.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","onClick":e[0]||(e[0]=function(t){return Object(w.unref)(b)()})},{"default":Object(w.withCtx)((function(){return[x]})),"_":1}),Object(w.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","onClick":e[1]||(e[1]=function(t){return O()})},{"default":Object(w.withCtx)((function(){return[P]})),"_":1}),Object(w.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","disabled":!(null!==(t=Object(w.unref)(u))&&void 0!==t&&t.tempFilePath),"onClick":e[2]||(e[2]=function(t){var e;return Object(w.unref)(v)(null===(e=Object(w.unref)(u))||void 0===e?void 0:e.tempFilePath)})},{"default":Object(w.withCtx)((function(){return[C]})),"_":1},8,["disabled"]),Object(w.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","disabled":!(null!==(r=Object(w.unref)(u))&&void 0!==r&&r.tempFilePath),"onClick":e[3]||(e[3]=function(t){var e,n;return null===(e=Object(w.unref)(f))||void 0===e||null===(n=e.stop)||void 0===n?void 0:n.call(e)})},{"default":Object(w.withCtx)((function(){return[S]})),"_":1},8,["disabled"])]})),"_":1})}}});e.default=T}}]);