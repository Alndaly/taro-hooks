(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{"274":function(e,t,n){"use strict";n.r(t);var r=n(0);var c=n(3),u=n(15),a=n(12),i=n(8),o=n(333),s=n(19),b={};function _subscribeToFriendStatus(){return(_subscribeToFriendStatus=Object(a.a)(Object(c.a)().mark((function _callee(e,t){return Object(c.a)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!b[e]){n.next=3;break}return console.warn("alert: already subscribed to friend status",e),n.abrupt("return");case 3:b[e]=setInterval((function(){return t(Boolean(Math.random()>.5))}),1e3);case 4:case"end":return n.stop()}}),_callee)})))).apply(this,arguments)}function _unsubscribeFromFriendStatus(){return(_unsubscribeFromFriendStatus=Object(a.a)(Object(c.a)().mark((function _callee2(e){return Object(c.a)().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(b[e]){t.next=3;break}return console.warn("alert: not subscribed to friend status",e),t.abrupt("return");case 3:clearInterval(b[e]),delete b[e];case 5:case"end":return t.stop()}}),_callee2)})))).apply(this,arguments)}var l={"subscribeToFriendStatus":function subscribeToFriendStatus(e,t){return _subscribeToFriendStatus.apply(this,arguments)},"unsubscribeFromFriendStatus":function unsubscribeFromFriendStatus(e){return _unsubscribeFromFriendStatus.apply(this,arguments)}},d={"setup":function setup(){var e=i.a.useTaroState(0),t=Object(u.a)(e,2),n=t[0],r=t[1];i.a.useTaroEffect((function(){Object(o.h)({"title":"You clicked"+Object(s.e)(n)+"times","duration":2e3})}),[n]);var c=i.a.useTaroState(null),a=Object(u.a)(c,2),b=a[0],d=a[1];return i.a.useTaroEffect((function(){return l.subscribeToFriendStatus(1,d),function cleanup(){l.unsubscribeFromFriendStatus(1)}}),[b]),{"handleClick":function handleClick(){r(Object(s.e)(n)+1)},"count":n,"isOnline":b}}},f=n(40);const p=n.n(f)()(d,[["render",function render(e,t,n,c,u,a){var i=Object(r.resolveComponent)("nut-button"),o=Object(r.resolveComponent)("demo-content"),s=Object(r.resolveComponent)("taro-view"),b=Object(r.resolveComponent)("taro-block");return Object(r.openBlock)(),Object(r.createBlock)(b,null,{"default":Object(r.withCtx)((function(){return[Object(r.createVNode)(o,{"title":"1. without sideEffect"},{"default":Object(r.withCtx)((function(){return[Object(r.createVNode)(i,{"shape":"square","type":"primary","block":"","onClick":t[0]||(t[0]=function(e){return c.handleClick()})},{"default":Object(r.withCtx)((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(c.count),1)]})),"_":1})]})),"_":1}),Object(r.createVNode)(o,{"title":"2. with sideEffect"},{"default":Object(r.withCtx)((function(){return[Object(r.createVNode)(s,{"class":"control-input"},{"default":Object(r.withCtx)((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(null===c.isOnline?"Loading...":c.isOnline?"Online":"Offline"),1)]})),"_":1})]})),"_":1})]})),"_":1})}]]);t.default=p}}]);